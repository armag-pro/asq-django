{% extends "base_generic.html" %}

{% block content %}
<!-- {% if user.is_authenticated %}
    <a href="{% url 'asq_app:ask' %}">Add Question</a>
{% else %}
    <a href="{% url 'asq_app:ask' %}">Add Question</a>
{% endif %} -->
{% if user.is_authenticated %}
<a href="{% url 'asq_app:ask' %}">Add Question</a>
{% else %}
<a href="/accounts/login">Add Question</a>
{% endif %}

{% if latest_question_list %}

<ul class="list-group" >
    {% for question in latest_question_list %}
    <li class="list-group-item" ><a  href="{% url 'asq_app:question_detail' question.slug %}">{{ question.title }}</a><span class="badge" >author-{{question.author}} answer  count-{{question.answers.all.count}} comment count - {{question.comments.all.count}}</span>
  </li><br>
    {% endfor %}
</ul>
{% else %}
<p>No Questions are available.</p>
{% endif %}

<input id="tag" type="text" placeholder="enter tag" />
<button onclick="tag_fliter()" >submit</button>
<div id="tag_fliter_content"></div>
<script>
function tag_fliter(){
    var tag= $("#tag").val();
    $.ajax({
        url: '/q/tag_route/',
        data: {
          'tag':tag
        },
        dataType: 'json',
        success: function (data) {
        	if(data.question.length == 0){
        		txt="No Question Found";
        	}
          else if (data){
          	txt=""
          	for(var i=0;i<(data.question).length;i++)
          		txt+="<a href="+data.question[i]+">"+data.question_title[i]+"</a><br>"
          }
          	$("#tag_fliter_content").html("<p>"+txt+"</p>")
           
       
   }
      });
	}
</script>
{% endblock %}